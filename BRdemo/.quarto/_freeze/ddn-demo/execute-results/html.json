{
  "hash": "1580ee0d77371ecf83147e151ab19554",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Implementing the daily-drinking-notebook\"\n\n\nnavbar:\n    right:\n      - icon: github\n        href: https://github.com/partha-pkp/GitHUB-BRDemo\n---\n\n\n\n\n## Setting up \n\n\n::: {.cell}\n\n```{.r .cell-code}\ngetwd()\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nif (!require(\"pacman\")) \n  install.packages(\"pacman\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: pacman\n```\n\n\n:::\n\n```{.r .cell-code}\npacman::p_load(\"statmod\",\n\"mvtnorm\",\n\"Matrix\", \n\"splines\",\n\"xtable\",\n\"IRdisplay\",\n\"repr\",\n\"plotly\",\n\"extrafont\",\n\"ggplot2\",\n\"gridExtra\",\n\"grid\",\n\"table1\",\n\"coda\",\n\"rstanarm\",\n\"bayesplot\")\n```\n:::\n\n\n\n## Loading Data\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrm(list=ls()) # cleans memory\n\nload(\"Mixed.SVM-main/data/processed/example.RData\")\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(drinks)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  ursi male age Day        SD AD HD MD NICUSEDAY THCUSEDAY OTHERDRUGUSE\n1    1    1  40   1 7.0507639  1  1  0         1         1            0\n2    1    1  40   2 0.0000000  0  0  0         0         0            0\n3    1    1  40   3 0.0000000  0  0  0         0         0            0\n4    1    1  40   4 0.5401274  1  0  0         0         0            0\n5    1    1  40   5 0.6186828  1  0  0         0         1            0\n6    1    1  40   6 3.2584603  1  0  1         0         1            0\n```\n\n\n:::\n:::\n\n\n\n## Model Implementation\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# set up for plotting figures\noptions(bitmapType=\"cairo\") #linux\n\n#options(bitmapType=\"quartz\") # mac\n\n\nset.seed(2) #sets a seed for random number generators used by the algorithm\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nsource(\"Mixed.SVM-main/src/R/mixed-svm.R\")\n\n# source('src/R/mixed-svm.R')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nY <- as.vector(drinks$HD) # outcome\nX <- as.matrix(drinks[,c(\"male\",\"age\",\"NICUSEDAY\",\"THCUSEDAY\",\"OTHERDRUGUSE\")]) # covariates\nT <- as.vector(drinks$Day) # times\nU <- as.vector(drinks$ursi) # individual id\nTmax <- 720\nknot.seq <- c(0.5)\n# Iter <- 100000\nIter <- 1000\nburn.in <- 50000\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Runs the algorithm\n# Remove # to run\n# MCMC.res <- Mixed.SVM(Y, X, T, U, Tmax, knot.seq, Iter)\n\n# Saves the results\n# Remove # to run\n# save(MCMC.res,file='Mixed.SVM-main/reports/demo-results1k.RData')\n\n# Here we pull up previously saved results\n# load(file='Mixed.SVM-main/reports/demo-results1k.RData')\n```\n:::\n\n\n\n\n## Results\n\n### 100 Iterations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading the results\nload(file='Mixed.SVM-main/reports/demo-results100.RData')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Understanding Dimensions and other parameters of the output \n\nstr(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:100, 1:5] -0.291 -0.28 -0.277 -0.267 -0.262 ...\n```\n\n\n:::\n\n```{.r .cell-code}\ndim(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 100   5\n```\n\n\n:::\n\n```{.r .cell-code}\ndimnames(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\n# Trace plots\n\n# mcmc_trace(MCMC.res$Beta) --> Error in `parameter_names()`\n\n# Adding column names to the \"Beta\" matrix to avoid the above error\ncolnames(MCMC.res$Beta) <- c(\"beta_male\",\"beta_age\",\"beta_NICUSEDAY\",\"beta_THCUSEDAY\",\"beta_OTHERDRUGUSE\")\nmcmc_trace(as.array(MCMC.res$Beta))\n```\n\n::: {.cell-output-display}\n![](ddn-demo_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n\n### 1000 Iterations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading the results\nload(file='Mixed.SVM-main/reports/demo-results1k.RData')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Understanding Dimensions and other parameters of the output \n\nstr(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:1000, 1:5] -0.288 -0.277 -0.265 -0.255 -0.244 ...\n```\n\n\n:::\n\n```{.r .cell-code}\ndim(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1000    5\n```\n\n\n:::\n\n```{.r .cell-code}\ndimnames(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\n# Trace plots\n\n# mcmc_trace(MCMC.res$Beta) --> Error in `parameter_names()`\n\n# Adding column names to the \"Beta\" matrix to avoid the above error\ncolnames(MCMC.res$Beta) <- c(\"beta_male\",\"beta_age\",\"beta_NICUSEDAY\",\"beta_THCUSEDAY\",\"beta_OTHERDRUGUSE\")\nmcmc_trace(as.array(MCMC.res$Beta))\n```\n\n::: {.cell-output-display}\n![](ddn-demo_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n\n\n### 10000 Iterations\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Loading the results\nload(file='Mixed.SVM-main/reports/demo-results10k.RData')\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Understanding Dimensions and other parameters of the output \n\nstr(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n num [1:10000, 1:5] -0.287 -0.286 -0.275 -0.271 -0.267 ...\n```\n\n\n:::\n\n```{.r .cell-code}\ndim(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 10000     5\n```\n\n\n:::\n\n```{.r .cell-code}\ndimnames(MCMC.res$Beta)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nNULL\n```\n\n\n:::\n\n```{.r .cell-code}\n# Trace plots\n\n# mcmc_trace(MCMC.res$Beta) --> Error in `parameter_names()`\n\n# Adding column names to the \"Beta\" matrix to avoid the above error\ncolnames(MCMC.res$Beta) <- c(\"beta_male\",\"beta_age\",\"beta_NICUSEDAY\",\"beta_THCUSEDAY\",\"beta_OTHERDRUGUSE\")\nmcmc_trace(as.array(MCMC.res$Beta))\n```\n\n::: {.cell-output-display}\n![](ddn-demo_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "ddn-demo_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}